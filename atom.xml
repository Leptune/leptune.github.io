<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ANIMO!</title>
  <subtitle>FIGHT!</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://leptune.github.io/"/>
  <updated>2016-04-06T07:30:32.841Z</updated>
  <id>https://leptune.github.io/</id>
  
  <author>
    <name>Leptune</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>日志分表</title>
    <link href="https://leptune.github.io/2016/04/06/log-sep/"/>
    <id>https://leptune.github.io/2016/04/06/log-sep/</id>
    <published>2016-04-06T02:52:45.548Z</published>
    <updated>2016-04-06T07:30:32.841Z</updated>
    
    <content type="html">&lt;p&gt;逻辑梳理：&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;直接运行下面的php代码便可得到所有表的分表sql语句：&quot;&gt;&lt;a href=&quot;#直接运行下面的php代码便可得到所有表的分表sql语句：&quot; class=&quot;headerlink&quot; title=&quot;直接运行下面的php代码便可得到所有表的分表sql语句：&quot;&gt;&lt;/a&gt;直接运行下面的php代码便可得到所有表的分表sql语句：&lt;/h2&gt;&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;lt;?php&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;gen_partion_log&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;($tables, $db_name)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    $sql = &lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;foreach&lt;/span&gt; ($tables &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; $tb) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        $sql .= &lt;span class=&quot;string&quot;&gt;&amp;lt;&amp;lt;&amp;lt;EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-- 建立临时分区表：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-- 拷贝表结构：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Delimiter ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;drop table if exists &lt;span class=&quot;subst&quot;&gt;&amp;#123;$tb[&#39;name&#39;]&amp;#125;&lt;/span&gt;_tmp;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;create table &lt;span class=&quot;subst&quot;&gt;&amp;#123;$tb[&#39;name&#39;]&amp;#125;&lt;/span&gt;_tmp like &lt;span class=&quot;subst&quot;&gt;&amp;#123;$tb[&#39;name&#39;]&amp;#125;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-- RANGE COLUMNS分区要求分区列不能是varchar类型，所以，要将add_time改为int类型：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ALTER TABLE `&lt;span class=&quot;subst&quot;&gt;&amp;#123;$tb[&#39;name&#39;]&amp;#125;&lt;/span&gt;_tmp` CHANGE COLUMN `&lt;span class=&quot;subst&quot;&gt;&amp;#123;$tb[&#39;timefield&#39;]&amp;#125;&lt;/span&gt;` `&lt;span class=&quot;subst&quot;&gt;&amp;#123;$tb[&#39;timefield&#39;]&amp;#125;&lt;/span&gt;` INT NOT NULL COMMENT &#39;添加时间-时间戳&#39;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-- 分区列必须包含在主键里，所以要将&lt;span class=&quot;subst&quot;&gt;&amp;#123;$tb[&#39;timefield&#39;]&amp;#125;&lt;/span&gt;包含进主键：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ALTER TABLE `&lt;span class=&quot;subst&quot;&gt;&amp;#123;$tb[&#39;name&#39;]&amp;#125;&lt;/span&gt;_tmp`    DROP PRIMARY KEY,  ADD PRIMARY KEY (`id`, `&lt;span class=&quot;subst&quot;&gt;&amp;#123;$tb[&#39;timefield&#39;]&amp;#125;&lt;/span&gt;`);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-- 增加分区（按月分区）：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ALTER TABLE `&lt;span class=&quot;subst&quot;&gt;&amp;#123;$tb[&#39;name&#39;]&amp;#125;&lt;/span&gt;_tmp`  PARTITION BY RANGE COLUMNS(&lt;span class=&quot;subst&quot;&gt;&amp;#123;$tb[&#39;timefield&#39;]&amp;#125;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(PARTITION p201511 VALUES LESS THAN (UNIX_TIMESTAMP(&#39;2015-12-01&#39;)),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; PARTITION p201512 VALUES LESS THAN (UNIX_TIMESTAMP(&#39;2016-01-01&#39;)),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; PARTITION p201601 VALUES LESS THAN (UNIX_TIMESTAMP(&#39;2016-02-01&#39;)),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; PARTITION p201602 VALUES LESS THAN (UNIX_TIMESTAMP(&#39;2016-03-01&#39;)),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; PARTITION p201603 VALUES LESS THAN (UNIX_TIMESTAMP(&#39;2016-04-01&#39;)),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; PARTITION p201604 VALUES LESS THAN (UNIX_TIMESTAMP(&#39;2016-05-01&#39;)),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; PARTITION p201605 VALUES LESS THAN (UNIX_TIMESTAMP(&#39;2016-06-01&#39;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; );&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-- 从&lt;span class=&quot;subst&quot;&gt;&amp;#123;$tb[&#39;name&#39;]&amp;#125;&lt;/span&gt;表中导入数据：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;insert into &lt;span class=&quot;subst&quot;&gt;&amp;#123;$tb[&#39;name&#39;]&amp;#125;&lt;/span&gt;_tmp select * from &lt;span class=&quot;subst&quot;&gt;&amp;#123;$tb[&#39;name&#39;]&amp;#125;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-- 将临时表和正式表互换：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;drop table if exists &lt;span class=&quot;subst&quot;&gt;&amp;#123;$tb[&#39;name&#39;]&amp;#125;&lt;/span&gt;_older;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rename table &lt;span class=&quot;subst&quot;&gt;&amp;#123;$tb[&#39;name&#39;]&amp;#125;&lt;/span&gt; to &lt;span class=&quot;subst&quot;&gt;&amp;#123;$tb[&#39;name&#39;]&amp;#125;&lt;/span&gt;_older;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rename table &lt;span class=&quot;subst&quot;&gt;&amp;#123;$tb[&#39;name&#39;]&amp;#125;&lt;/span&gt;_tmp to &lt;span class=&quot;subst&quot;&gt;&amp;#123;$tb[&#39;name&#39;]&amp;#125;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-- 创建数据库定时任务（每个月的1号的凌晨1点执行上面创建的存储器）：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DELIMITER $$&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DROP EVENT IF EXISTS `eSetPartition_&lt;span class=&quot;subst&quot;&gt;&amp;#123;$tb[&#39;name&#39;]&amp;#125;&lt;/span&gt;`;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$$&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CREATE EVENT eSetPartition_&lt;span class=&quot;subst&quot;&gt;&amp;#123;$tb[&#39;name&#39;]&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ON SCHEDULE EVERY 1 MONTH STARTS DATE_ADD(DATE_ADD(DATE_SUB(CURDATE(),INTERVAL DAY(CURDATE())-1 DAY), INTERVAL 1 MONTH),INTERVAL 1 HOUR)   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ON COMPLETION PRESERVE ENABLE  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;COMMENT &#39;对&lt;span class=&quot;subst&quot;&gt;&amp;#123;$tb[&#39;name&#39;]&amp;#125;&lt;/span&gt;表每个月1号的凌晨1点自动执行分区&#39; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DO&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BEGIN&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    call SetPartitionTimestamp(&lt;span class=&quot;string&quot;&gt;&#39;&amp;#123;$tb[&#39;&lt;/span&gt;name&lt;span class=&quot;string&quot;&gt;&#39;]&amp;#125;&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;END;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$$&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;EOF;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    $sql .= &lt;span class=&quot;string&quot;&gt;&amp;lt;&amp;lt;&amp;lt;EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-- 创建存储过程来自动为每个月创建分区：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DELIMITER $$&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DROP PROCEDURE IF EXISTS `SetPartitionTimestamp`;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$$&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CREATE PROCEDURE SetPartitionTimestamp(IN tb_name varchar(30))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;COMMENT &#39;对timestamp字段类型按每个月划分分区&#39;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BEGIN&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    SET @db_name = &lt;span class=&quot;string&quot;&gt;&#39;&amp;#123;$db_name&amp;#125;&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    SET @part_prefix = &lt;span class=&quot;string&quot;&gt;&#39;p&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    SELECT REPLACE(partition_name,@part_prefix,&lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;) INTO @last_year_mon&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        FROM INFORMATION_SCHEMA.PARTITIONS&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        WHERE TABLE_SCHEMA=@db_name &lt;span class=&quot;keyword&quot;&gt;AND&lt;/span&gt; table_name=tb_name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ORDER BY partition_ordinal_position DESC&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        LIMIT &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    select PERIOD_ADD(@last_year_mon,&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;) into @next_year_mon;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    select PERIOD_ADD(@next_year_mon,&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;) into @next_next_year_mon;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    SET @exec_sql = CONCAT(&lt;span class=&quot;string&quot;&gt;&#39;ALTER TABLE `&#39;&lt;/span&gt;, tb_name, &lt;span class=&quot;string&quot;&gt;&#39;` ADD PARTITION (PARTITION &#39;&lt;/span&gt;, @part_prefix, @next_year_mon, &lt;span class=&quot;string&quot;&gt;&#39; VALUES LESS THAN (UNIX_TIMESTAMP(\&#39;&#39;&lt;/span&gt;, @next_next_year_mon, &lt;span class=&quot;string&quot;&gt;&#39;01\&#39;)))&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    PREPARE stmt2 FROM @exec_sql;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    EXECUTE stmt2;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    DEALLOCATE PREPARE stmt2;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;END;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$$&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-- 开启event：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SET &lt;span class=&quot;keyword&quot;&gt;GLOBAL&lt;/span&gt; event_scheduler = ON;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SET @@&lt;span class=&quot;keyword&quot;&gt;global&lt;/span&gt;.event_scheduler = ON;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SET &lt;span class=&quot;keyword&quot;&gt;GLOBAL&lt;/span&gt; event_scheduler = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SET @@&lt;span class=&quot;keyword&quot;&gt;global&lt;/span&gt;.event_scheduler = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$$&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;EOF;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; $sql;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$tables = [ &lt;span class=&quot;comment&quot;&gt;// 表名、分列字段&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [&lt;span class=&quot;string&quot;&gt;&#39;name&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&#39;dx_zhushou_update_log&#39;&lt;/span&gt;   , &lt;span class=&quot;string&quot;&gt;&#39;timefield&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&#39;updateDate&#39;&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [&lt;span class=&quot;string&quot;&gt;&#39;name&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&#39;dx_zhushou_uninstall_log&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;timefield&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&#39;updateDate&#39;&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [&lt;span class=&quot;string&quot;&gt;&#39;name&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&#39;dx_zhushou_run_log&#39;&lt;/span&gt;      , &lt;span class=&quot;string&quot;&gt;&#39;timefield&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&#39;updateDate&#39;&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [&lt;span class=&quot;string&quot;&gt;&#39;name&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&#39;dx_zhushou_install_log&#39;&lt;/span&gt;  , &lt;span class=&quot;string&quot;&gt;&#39;timefield&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&#39;updateDate&#39;&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [&lt;span class=&quot;string&quot;&gt;&#39;name&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&#39;dx_zhushou_down_log&#39;&lt;/span&gt;     , &lt;span class=&quot;string&quot;&gt;&#39;timefield&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&#39;downDate&#39;&lt;/span&gt;  ],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [&lt;span class=&quot;string&quot;&gt;&#39;name&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&#39;dx_syb_down_log&#39;&lt;/span&gt;         , &lt;span class=&quot;string&quot;&gt;&#39;timefield&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&#39;downDate&#39;&lt;/span&gt;  ],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [&lt;span class=&quot;string&quot;&gt;&#39;name&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&#39;dx_simulator_run_log&#39;&lt;/span&gt;    , &lt;span class=&quot;string&quot;&gt;&#39;timefield&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&#39;updateDate&#39;&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [&lt;span class=&quot;string&quot;&gt;&#39;name&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&#39;dx_simulator_install_log&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;timefield&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&#39;updateDate&#39;&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [&lt;span class=&quot;string&quot;&gt;&#39;name&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&#39;dx_phone_install_log&#39;&lt;/span&gt;    , &lt;span class=&quot;string&quot;&gt;&#39;timefield&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&#39;updateDate&#39;&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [&lt;span class=&quot;string&quot;&gt;&#39;name&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&#39;dx_game_log&#39;&lt;/span&gt;             , &lt;span class=&quot;string&quot;&gt;&#39;timefield&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&#39;add_time&#39;&lt;/span&gt;  ],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; gen_partion_log($tables, &lt;span class=&quot;string&quot;&gt;&#39;scp_shuowan_tj_local&#39;&lt;/span&gt;).&lt;span class=&quot;string&quot;&gt;&quot;\n&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;运行下面的sql语句可用于查询分表后的性能&quot;&gt;&lt;a href=&quot;#运行下面的sql语句可用于查询分表后的性能&quot; class=&quot;headerlink&quot; title=&quot;运行下面的sql语句可用于查询分表后的性能&quot;&gt;&lt;/a&gt;运行下面的sql语句可用于查询分表后的性能&lt;/h2&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;--查看插入的数据是否有按分区存放：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Delimiter ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;SELECT&lt;/span&gt; PARTITION_NAME &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; 分区名,PARTITION_ORDINAL_POSITION &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; 分区顺序, PARTITION_DESCRIPTION &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; 分区条件, TABLE_ROWS &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; 分区行数&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;FROM&lt;/span&gt; information_schema.PARTITIONS &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;WHERE&lt;/span&gt; TABLE_SCHEMA=&lt;span class=&quot;string&quot;&gt;&#39;scp_shuowan_tj_local&#39;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;AND&lt;/span&gt; TABLE_NAME = &lt;span class=&quot;string&quot;&gt;&#39;dx_game_log&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;--对比分区前后查询速度：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;--分区前的查询速度（结果：查询时间约0.4s）：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;count&lt;/span&gt;(*) &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; dx_game_log_older &lt;span class=&quot;keyword&quot;&gt;where&lt;/span&gt; add_time &amp;gt;= &lt;span class=&quot;keyword&quot;&gt;unix_timestamp&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;2016-03-01&#39;&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;and&lt;/span&gt; add_time &amp;lt; &lt;span class=&quot;keyword&quot;&gt;unix_timestamp&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;2016-04-01&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;--分区后的查询速度（结果：查询时间约0.1s）：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;count&lt;/span&gt;(*) &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; dx_game_log &lt;span class=&quot;keyword&quot;&gt;where&lt;/span&gt; add_time &amp;gt;= &lt;span class=&quot;keyword&quot;&gt;unix_timestamp&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;2016-03-01&#39;&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;and&lt;/span&gt; add_time &amp;lt; &lt;span class=&quot;keyword&quot;&gt;unix_timestamp&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;2016-04-01&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;--查看分区后，执行的查询有扫描哪些分区（结果：只扫描了p201603分区。若将&amp;lt;改为&amp;lt;=，则会扫描p201603,p201604两个分区）：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;explain&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;partitions&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;count&lt;/span&gt;(*) &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; dx_game_log &lt;span class=&quot;keyword&quot;&gt;where&lt;/span&gt; add_time &amp;gt;= &lt;span class=&quot;keyword&quot;&gt;unix_timestamp&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;2016-03-01&#39;&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;and&lt;/span&gt; add_time &amp;lt; &lt;span class=&quot;keyword&quot;&gt;unix_timestamp&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;2016-04-01&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;确认无误后，删除旧的未分表的表：&quot;&gt;&lt;a href=&quot;#确认无误后，删除旧的未分表的表：&quot; class=&quot;headerlink&quot; title=&quot;确认无误后，删除旧的未分表的表：&quot;&gt;&lt;/a&gt;确认无误后，删除旧的未分表的表：&lt;/h2&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Delimiter ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;drop&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;exists&lt;/span&gt; dx_zhushou_update_log_older;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;drop&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;exists&lt;/span&gt; dx_zhushou_uninstall_log_older;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;drop&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;exists&lt;/span&gt; dx_zhushou_run_log_older;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;drop&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;exists&lt;/span&gt; dx_zhushou_install_log_older;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;drop&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;exists&lt;/span&gt; dx_zhushou_down_log_older;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;drop&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;exists&lt;/span&gt; dx_syb_down_log_older;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;drop&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;exists&lt;/span&gt; dx_simulator_run_log_older;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;drop&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;exists&lt;/span&gt; dx_simulator_install_log_older;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;drop&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;exists&lt;/span&gt; dx_phone_install_log_older;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;drop&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;exists&lt;/span&gt; dx_game_log_older;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;hr&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;逻辑梳理：&lt;br&gt;
    
    </summary>
    
      <category term="工作日志" scheme="https://leptune.github.io/categories/%E5%B7%A5%E4%BD%9C%E6%97%A5%E5%BF%97/"/>
    
    
      <category term="唯中科技" scheme="https://leptune.github.io/tags/%E5%94%AF%E4%B8%AD%E7%A7%91%E6%8A%80/"/>
    
  </entry>
  
  <entry>
    <title>Hello World leptune</title>
    <link href="https://leptune.github.io/2016/04/06/hello-world/"/>
    <id>https://leptune.github.io/2016/04/06/hello-world/</id>
    <published>2016-04-06T02:02:28.796Z</published>
    <updated>2016-04-07T01:26:14.849Z</updated>
    
    <content type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;https://hexo.io/docs/troubleshooting.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;Quick-Start&quot;&gt;&lt;a href=&quot;#Quick-Start&quot; class=&quot;headerlink&quot; title=&quot;Quick Start&quot;&gt;&lt;/a&gt;Quick Start&lt;/h2&gt;&lt;h3 id=&quot;Create-a-new-post&quot;&gt;&lt;a href=&quot;#Create-a-new-post&quot; class=&quot;headerlink&quot; title=&quot;Create a new post&quot;&gt;&lt;/a&gt;Create a new post&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo new &lt;span class=&quot;string&quot;&gt;&quot;My New Post&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/writing.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Writing&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Run-server&quot;&gt;&lt;a href=&quot;#Run-server&quot; class=&quot;headerlink&quot; title=&quot;Run server&quot;&gt;&lt;/a&gt;Run server&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo server&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/server.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Server&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Generate-static-files&quot;&gt;&lt;a href=&quot;#Generate-static-files&quot; class=&quot;headerlink&quot; title=&quot;Generate static files&quot;&gt;&lt;/a&gt;Generate static files&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo generate&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/generating.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Generating&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Deploy-to-remote-sites&quot;&gt;&lt;a href=&quot;#Deploy-to-remote-sites&quot; class=&quot;headerlink&quot; title=&quot;Deploy to remote sites&quot;&gt;&lt;/a&gt;Deploy to remote sites&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo deploy&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/deployment.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Deployment&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;https://hexo.io/docs/troubleshooting.html&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
</feed>
